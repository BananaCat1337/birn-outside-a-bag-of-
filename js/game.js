let scenes = [
    {
      text: "В этой истории можно встретить все то, что пришлось делать не по планам, которые мы изначально ставили!",
      bg: "",
      voice: "../sound/sergey/1.mp3",
      character: { name: "", sprite: "", position: "" }
    },
    {
      text: "История изменялась много раз настолько, что Вадим сошёл с ума.",
      bg: "url('background2.jpg')",
      voice: "../sound/sergey/2.mp3",
      character: { name: "", sprite: "", position: "" }
    },
    {
      text: "Мда, зачем я только начал работать с ними, вообще не понимаю.",
      bg: "url('background3.jpg')",
      voice: "../sound/sergey/3.mp3",
      character: { name: "", sprite: "", position: "" }
    },
    {
        text: "Но все пошло далеко не по его планам.",
        bg: "url('background2.jpg')",
        voice: "../sound/sergey/4.mp3",
        character: { name: "", sprite: "", position: "" }
      },
      {
        text: "Мда, зачем я только начал работать с ними, вообще не понимаю.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "left" }
      },
      {
        text: "Пойду лучше поиграю в марвел, ранг сам себя не будет аппать)",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "left" }
      },
      {
        text: "Зайдя в свою комнату, он увидел три силуета сидевшие полу кругом.",
        bg: "url('background2.jpg')",
        voice: "../sound/sergey/5.mp3",
        character: { name: "", sprite: "", position: "" }
      },
      {
        text: "Че, вы че шизойды тут делаете?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "left" }
      },
      {
        text: "Ты думал, что можешь просто так уйти?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Ты теперь часть корабля.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "У тебя случайно нет кумыса?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Никита", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Жажда мучает.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Никита", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Питон-бот, хихих, питон-бот, я рисовач с двача!",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Олег", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Ты посмотри на этот корабль. Что тут вообще можно поймать?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Да и Андрей даже не пришёл. О чём говорить, если не все хотят работать?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Он сломал мизинец о лавочку, и его котёнок тоже.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Bruh.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Ну ладно, есть идея, которая точно выстрелит. Для начала сходи за Бёрном, там всё поймёшь сам.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Зачем мне идти? Я просто поеду и куплю за пять минут. Да и не думаю, что это поможет.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Сорри, сегодняшним заданием от Тайлера было залить тебе в расширительный бачок масло.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Да и так бы ничего не получилось.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Ты шизоид, ты сам мне её чинить будешь, в курсе?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Никита починит, он же бурят!",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Я только на конях езжу, ты что, дурак?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Никита", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Доржо поможет, он как раз опять потерялся.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Никита", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Вы уроды, реально, что за кринж тут несёте...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: `Питон-бот, питон, print("hell eeeeeeeeeeeeeeeeeeeeeee"), питон!`,
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Олег", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Вдруг сзади Вадима раздался резкий звук. Он машинально обернулся, но ничего не увидел. Вернув взгляд в комнату, он обнаружил, что никого нет.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },
      {
        text: "Выйдя из дома, он оказался в незнакомом месте — в лесу, посреди поля.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },
      {
        text: "Может, я сплю? Что-то мистическое происходит этим вечером...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Вдалеке он видет человека возле дерева с телефоном",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },
      {
        text: "Может он мне подскажет что тут происходит и куда мне идти.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Подойдя к нему он увидел знакомую фигуру",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },
      {
        text: "черт что за невезение, куда я пришёл вообще, 2гис урод!",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "ты чего шиз ушёл, ты как вообще ко мне в квартиру залез?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "чего? Я вообще никуда не заходил, я тут ну просто, понимаешь, ну гуляю крч.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Странно тебя тут видеть, в этой глуши...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Богдан", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Всмысле вот мой дом, сзади меня, странно что тут лес появился вообще.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "лаааадно, слушай мне пора, удачи тебе тут не потеряться.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "странно, что это вообще щас было, ладно, пойду лучше все таки в марвел играть.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Когда он развернулся чтобы пойти домой, на его месте ничего не было, только поле.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },
      {
        text: "Ватахел, что тут вообще происходит?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Может мне все таки нужно сходить и купить берн?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "одни вопросы сегодня, что тут вообще происходит..",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Забив в 2гис магазин, он понял что идти до магазина не так и далеко, правда там была только заправка.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "черт, придется переплатить, ну ладно, если это поможет избавиться от этого кошмара, то не так и страшно",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "8 минут великой ходьбы, до места идти ещё несколько метров, но на его пути встретился величайший.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "О Клементий Андреевич, что Вы тут делаете?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Оооо Здравствуйте Здравствуйте, а я тут можно сказать отдыхаю и размышляю",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Клементий", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Странно, я думал, вы уже готовитесь ко сну. Ведь завтра пары, не боитесь опоздать?",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "А вам ещё не сказали? Меня заменили на DeepSeek. Сказали, что она работает продуктивнее, бесплатно, да ещё и развивается по часам.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Клементий", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Предлагаю посмотреть на это с другой стороны.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Клементий", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Вы войдёте в историю, так как на вас снова проводят эксперименты и будут набивать руку для обучения.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Клементий", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Да они издеваются? Я не буду больше платить за это! Просто бред.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Ладно, мне пора. Рад тебя встретить, удивлён, что ты так далеко...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Клементий", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "Да я сам не понимаю, как тут оказался...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },
      {
        text: "После того как Вадим моргнул, перед ним никого не было — только заправка.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },      {
        text: "Что ж, одно радует: я как можно быстрее с этим закончу.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },      {
        text: "Проходя мимо одной из колонок, Вадим заметил нечто.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },      {
        text: "Перед ним возникло тело с двумя головами, которое о чём-то спорило.",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "", sprite: "", position: "" }
      },// половина всего
            {
        text: "Вы уроды, реально, что за кринж тут несёте...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },      {
        text: "Вы уроды, реально, что за кринж тут несёте...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },      {
        text: "Вы уроды, реально, что за кринж тут несёте...",
        bg: "url('background2.jpg')",
        voice: "voice2.mp3",
        character: { name: "Вадим", sprite: "url('character2.png')", position: "right" }
      },

  ];
  
  let currentScene = 0;
  let musicPlaying = true;
  let voiceEnabled = true;
  
  function startGame() {
    document.querySelector('.menu-container').style.display = 'none';
    document.getElementById('game-container').style.display = 'block';
    nextScene();
  }
  
  function nextScene() {
    if (currentScene >= scenes.length) {
      alert("Игра завершена!");
      return window.close();
    }
    let scene = scenes[currentScene];
    document.getElementById('background').style.backgroundImage = scene.bg;
  
    let textBox = document.getElementById('dialogue-text');
    let characterName = document.getElementById('character-name');
    textBox.style.opacity = 0;
    characterName.style.opacity = 0;
  
    setTimeout(() => {
      textBox.innerText = scene.text;
      characterName.innerText = scene.character.name;
      textBox.style.opacity = 1;
      characterName.style.opacity = 1;
    }, 200);
  
    // Установка спрайта персонажа
    if (scene.character.position === "left") {
      document.getElementById('character-left').style.backgroundImage = scene.character.sprite;
      document.getElementById('character-right').style.backgroundImage = '';
    } else {
      document.getElementById('character-right').style.backgroundImage = scene.character.sprite;
      document.getElementById('character-left').style.backgroundImage = '';
    }
  
    if (voiceEnabled) playVoice(scene.voice);
    currentScene++;
  }
  
  function playVoice(voiceFile) {
    let voice = document.getElementById('voice');
    voice.src = voiceFile;
    voice.play();
  }
  
  function openSettings() {
    document.getElementById('settings-modal').style.display = 'block';
  }
  
  function closeSettings() {
    document.getElementById('settings-modal').style.display = 'none';
  }
  
  function exitGame() {
    window.close();
  }

  document.getElementById('text-box').addEventListener('click', nextScene);

// Добавление ползунков громкости
const volumeControls = document.createElement('div');
volumeControls.innerHTML = `
  <div class="volume-container">
    <div class="volume-icon" id="music-icon">🔊</div>
    <input type="range" id="music-volume" min="0" max="1" step="0.01" value="1">
    <div class="volume-icon" id="voice-icon">🎤</div>
    <input type="range" id="voice-volume" min="0" max="1" step="0.01" value="1">
  </div>
`;
document.body.appendChild(volumeControls);

document.getElementById('music-volume').addEventListener('input', (event) => {
  document.getElementById('music').volume = event.target.value;
});

document.getElementById('voice-volume').addEventListener('input', (event) => {
  document.getElementById('voice').volume = event.target.value;
});

// Показывать ползунки при наведении
const volumeContainer = document.querySelector('.volume-container');
volumeContainer.style.position = 'absolute';
volumeContainer.style.top = '10px';
volumeContainer.style.right = '10px';
volumeContainer.style.display = 'flex';
volumeContainer.style.flexDirection = 'column';
volumeContainer.style.alignItems = 'center';
volumeContainer.style.opacity = '0';
volumeContainer.style.transition = 'opacity 0.5s';

document.querySelector('.volume-container').addEventListener('mouseenter', () => {
  volumeContainer.style.opacity = '1';
});

document.querySelector('.volume-container').addEventListener('mouseleave', () => {
  volumeContainer.style.opacity = '0';
});
